<head>
Closures can contain bugs if not realize that variables are included in close when closed
</head>
<body>

<script>


var buggyClosuredFunctionBecauseIIncrementedToLengthWhenClosureCreated = function() {
var someArray =[1,3,4,5,6,7,8,9,9,0,0,10];
var buggyClosure;
for (var i=0, loopGuardParam=someArray.length; i<loopGuardParam; i++) {
	if (someArray[i]===4) {
		 buggyClosure = function () { alert("4 found at index " + i);};

	}
}
return buggyClosure;
}();
buggyClosuredFunctionBecauseIIncrementedToLengthWhenClosureCreated();





var closureBuiltImmediately = function() {
var someArray =[1,3,4,5,6,7,8,9,9,0,0,10];
var goodClosure;
for (var i=0, loopGuardParam=someArray.length; i<loopGuardParam; i++) {
	if (someArray[i]===4) {
		 goodClosure = function (frozenI) {
		 		return function () {
		 			alert("4 found at Frozen index " + frozenI);
		 		};
		}(i);
	};
};
return goodClosure;
}();
closureBuiltImmediately();



var closuredFunctionReturnsImmediatelyPreventsIFromIncrementing = function() {
var someArray =[1,3,4,5,6,7,8,9,9,0,0,10];

for (var i=0, loopGuardParam=someArray.length; i<loopGuardParam; i++) {
	if (someArray[i]===4) {
		return function () { alert("4 found at index " + i);};

	}
}
}();

closuredFunctionReturnsImmediatelyPreventsIFromIncrementing();

</script>
</body>